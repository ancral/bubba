<VirtualHost *:80>
	ServerAdmin webmaster@localhost

	DocumentRoot /home/web/
	DirectoryIndex index.html index.htm index.cgi index.pl index.php index.xhtml
	<Directory />
		Options FollowSymLinks
		AllowOverride None
	</Directory>
	<Directory /home/web/>
		Options Indexes FollowSymLinks MultiViews
		AllowOverride None
		Order allow,deny
		allow from all
	</Directory>

	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
	<Directory "/usr/lib/cgi-bin">
		AllowOverride None
		Options ExecCGI -MultiViews +SymLinksIfOwnerMatch
		Order allow,deny
		Allow from all
	</Directory>

	ErrorLog /var/log/apache2/bubba-error.log
	LogLevel warn

	CustomLog /var/log/apache2/bubba-access.log combined
	ServerSignature On

	Alias /icons/ "/usr/share/apache2/icons/"
	<Directory "/usr/share/apache2/icons">
		Options Indexes MultiViews
		AllowOverride None
		Order allow,deny
		Allow from all
	</Directory>

	Alias /admin /opt/bubba/web-admin/admin

	<Directory /opt/bubba/web-admin/admin >
		AllowOverride None
		Order allow,deny
		allow from all
		DirectoryIndex index.php
		AddHandler php-cgi .php
		Action php-cgi /fcgi-bin/php.cgi virtual
	</Directory>

	ScriptAlias /fcgi-bin/php.cgi /opt/bubba/web-admin/admin
	FastCgiExternalServer /opt/bubba/web-admin/admin/index.php -socket /var/run/bubba-fcgi.sock -idle-timeout 120 -flush

	<Location /admin>
		RewriteEngine on
		RewriteBase /admin
		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteCond %{REQUEST_FILENAME} !-d
		RewriteRule ^(.*)$ index.php?/$1 [L]
	</Location>
</VirtualHost>
