diff -ruN a/Makefile b/Makefile
--- a/Makefile	2013-06-26 22:25:47.000000000 +0200
+++ b/Makefile	2015-07-07 12:51:50.056315337 +0200
@@ -120,7 +120,7 @@
 		po4a.conf
 	rm -f po4a.stamp
 
-locale_dir=$(DESTDIR)/usr/share/web-admin/admin/locale
+locale_dir=$(DESTDIR)/opt/bubba/web-admin/admin/locale
 
 install:
 	$(foreach ll,$(basename $(notdir $(wildcard po/php/*.mo))),\
diff -ruN a/admin/config/browser_cap.php b/admin/config/browser_cap.php
--- a/admin/config/browser_cap.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/config/browser_cap.php	2015-07-07 12:51:50.056315337 +0200
@@ -3,5 +3,5 @@
 
 $config['cache_path'] = '/var/cache/web-admin';
 $config['autoupdate'] = false;
-$config['ini_file'] = '/usr/share/bubba-frontend/lite_php_browscap.ini';
+$config['ini_file'] = '/etc/bubba/lite_php_browscap.ini';
 ?>
diff -ruN a/admin/config/config.php b/admin/config/config.php
--- a/admin/config/config.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/config/config.php	2015-07-07 12:51:50.066316270 +0200
@@ -11,7 +11,7 @@
 |	http://www.your-site.com/
 |
 */
-$config['base_url']	= "/admin/";
+$config['base_url']	= preg_replace("|^(/[^/]*/).*$|","\\1",$_SERVER["REQUEST_URI"]);
 
 /*
 |--------------------------------------------------------------------------
diff -ruN a/admin/controllers/ajax_settings.php b/admin/controllers/ajax_settings.php
--- a/admin/controllers/ajax_settings.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/controllers/ajax_settings.php	2015-07-07 12:56:25.892059557 +0200
@@ -76,7 +76,7 @@
   function get_versions() {
       $versions = get_package_version(array("bubba","bubba3-kernel","bubba-frontend","bubba-backend","bubba-album","filetransferdaemon","logitechmediaserver"));
       $this->session->set_userdata("version",$versions['bubba']);
-      $this->json_data = $versions;
+      $this->json_data = str_replace("null","not installed",$versions);
     }
 
   function identify() {
diff -ruN a/admin/controllers/settings.php b/admin/controllers/settings.php
--- a/admin/controllers/settings.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/controllers/settings.php	2015-07-07 12:51:50.086318137 +0200
@@ -240,7 +240,7 @@
     case 'get_versions':
       $versions = get_package_version(array("bubba","bubba3-kernel","bubba-frontend","bubba-backend","bubba-album","filetransferdaemon","logitechmediaserver"));
       $this->session->set_userdata("version",$versions['bubba']);
-      $output = json_encode($versions);
+      $output = str_replace("null","not installed",json_encode($versions));
       break;
     }
     syslog( LOG_DEBUG, $output );
diff -ruN a/admin/controllers/stat.php b/admin/controllers/stat.php
--- a/admin/controllers/stat.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/controllers/stat.php	2015-07-07 12:51:50.086318137 +0200
@@ -36,7 +36,7 @@
     }
 
     function _getprinters() {
-        $json =  _system('cups-list-printers');
+        $json =  _system('/opt/bubba/bin/cups-list-printers');
         return json_decode(implode($json),true);
     }
 
diff -ruN a/admin/index.php b/admin/index.php
--- a/admin/index.php	1970-01-01 01:00:00.000000000 +0100
+++ b/admin/index.php	2015-07-07 12:52:25.869657875 +0200
@@ -0,0 +1,32 @@
+<?php
+define('ENVIRONMENT', 'development');
+
+if (defined('ENVIRONMENT'))
+{
+	switch (ENVIRONMENT)
+	{
+		case 'development':
+			error_reporting(E_ALL);
+		break;
+
+		case 'testing':
+		case 'production':
+			error_reporting(0);
+		break;
+
+		default:
+			exit('The application environment is not set correctly.');
+	}
+}
+
+$system_path = "/opt/codeigniter/system/";
+$application_folder = "/opt/bubba/web-admin/admin";
+
+define('SELF', pathinfo(__FILE__, PATHINFO_BASENAME));
+define('BASEPATH', str_replace("\\", "/", $system_path));
+define('FCPATH', str_replace(SELF, '', __FILE__));
+define('SYSDIR', trim(strrchr(trim(BASEPATH, '/'), '/'), '/'));
+define('APPPATH', $application_folder.'/');
+
+require_once BASEPATH.'core/CodeIgniter.php';
+
diff -ruN a/admin/legacy/defines.php b/admin/legacy/defines.php
--- a/admin/legacy/defines.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/legacy/defines.php	2015-07-07 12:51:50.096319070 +0200
@@ -1,23 +1,24 @@
 <?php
 $CI =& get_instance();
-define("BACKEND","/usr/lib/web-admin/backend.pl");
-define("BACKUP","/usr/lib/web-admin/backup.pl");
+define("SCRIPTDIR","/opt/bubba/bin");
+define("BACKEND",SCRIPTDIR."/backend.pl");
+define("BACKUP",SCRIPTDIR."/backup.pl");
 define("RESTORE_LOCKFILE","/var/lock/restore.lock");
 define("BACKUP_LOCKFILE","/var/lock/backup.lock");
 
-define("UPDATER","/usr/lib/web-admin/updater.pl");
-define("PRINTFS","/usr/lib/web-admin/print.pl");
-define("FIREWALL","/usr/lib/web-admin/firewall.pl");
-define("DISK","/usr/lib/web-admin/disk.pl");
-define("ADMINFUNCS","/usr/lib/web-admin/adminfunctions.php");
-define("IPCFUNCS","/usr/share/ftd/ipc.php");
-define("EASYFIND_CONF","/etc/network/easyfind.conf");
+define("UPDATER",SCRIPTDIR."/updater.pl");
+define("PRINTFS",SCRIPTDIR."/print.pl");
+define("FIREWALL",SCRIPTDIR."/firewall.pl");
+define("DISK",SCRIPTDIR."/disk.pl");
+define("ADMINFUNCS",SCRIPTDIR."/adminfunctions.php");
+define("IPCFUNCS","/opt/bubba/ftd/ipc.php");
+define("EASYFIND_CONF","/etc/bubba/easyfind.conf");
 define("PWFILE","/etc/shadow");
 define("UINFOFILE","/etc/passwd");
 define("VERSION","BUBBA_VERSION");
-define("FORMPREFIX","/admin");
+define("FORMPREFIX",preg_replace("|^(/[^/]*)[/$].*$|","\\1",$_SERVER["REQUEST_URI"]));
 define("FALLBACKIP","192.168.10.1");
-define("BUBBA_VERSION","/usr/share/bubba/bubba.version");
+define("BUBBA_VERSION","/etc/bubba/bubba.version");
 define("USER_CONFIG",".bubbacfg");
 define("ADMINCONFIG","/home/admin/".USER_CONFIG);
 
diff -ruN a/admin/models/auth_model.php b/admin/models/auth_model.php
--- a/admin/models/auth_model.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/models/auth_model.php	2015-07-07 12:51:50.126321871 +0200
@@ -80,7 +80,7 @@
 	private $realname = "";
 
 	private $_dom;
-	private $_xml_file = "/etc/bubba_auth.xml";
+	private $_xml_file = "/etc/bubba/auth.xml";
 	private $_lock_file = "/var/lock/bubba_auth.lock";
 
 	function Auth_model(){
diff -ruN a/admin/models/networkmanager.php b/admin/models/networkmanager.php
--- a/admin/models/networkmanager.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/models/networkmanager.php	2015-07-07 12:51:50.096319070 +0200
@@ -100,7 +100,7 @@
             return false;
         }
 
-        $request = new HTTP_Request2('https://easyfind.excito.org/check.php', HTTP_Request2::METHOD_GET, array('ssl_verify_peer' => false));
+        $request = new HTTP_Request2('https://easyfind.mybubba.org/check.php', HTTP_Request2::METHOD_GET, array('ssl_verify_peer' => false));
         $url = $request->getUrl();
         $url->setQueryVariables(
             array(
@@ -162,7 +162,7 @@
 
     $lanip = $this->_get_ip($this->get_lan_interface());
 
-    $hosts = file_get_contents('/usr/share/bubba-backend/hosts.in');
+    $hosts = file_get_contents('/usr/share/doc/bubba-frontend-2.6/sample/hosts.in');
     str_replace(
       array('@LANIP@', '@NAME@'),
       array($lanip, $name),
diff -ruN a/admin/views/default/album/album_album_view.php b/admin/views/default/album/album_album_view.php
--- a/admin/views/default/album/album_album_view.php	2013-06-26 22:25:46.000000000 +0200
+++ b/admin/views/default/album/album_album_view.php	2015-07-07 12:51:50.106320004 +0200
@@ -413,7 +413,7 @@
 	<th colspan="2" class="ui-state-default ui-widget-header"><?=_("Existing albums")?></th>
 </tr>
 <tr>
-	<td colspan="2"><div><?=_("Adding images is done using the")?> <a href="/admin/filemanager/cd/home/storage/pictures"><?=_("filemanager")?></a></div></td>
+	<td colspan="2"><div><?=_("Adding images is done using the")?> <a href="<?=FORMPREFIX?>/filemanager/cd/home/storage/pictures"><?=_("filemanager")?></a></div></td>
 </tr>
 <tr>
 	<td><div id="album_list" /></td>
diff -ruN a/apache.conf b/apache.conf
--- a/apache.conf	2013-06-26 22:25:46.000000000 +0200
+++ b/apache.conf	2015-07-07 12:51:50.106320004 +0200
@@ -1,6 +1,6 @@
-Alias /admin /usr/share/web-admin/admin
+Alias /admin /opt/bubba/web-admin/admin
 
-<Directory /usr/share/web-admin/admin >
+<Directory /opt/bubba/web-admin/admin >
 	AllowOverride None
 	Order allow,deny
 	allow from all
@@ -9,8 +9,8 @@
 	Action php-cgi /fcgi-bin/php.cgi virtual
 </Directory>
 
-ScriptAlias /fcgi-bin/php.cgi /usr/share/web-admin/admin
-FastCgiExternalServer /usr/share/web-admin/admin/index.php -socket fcgi -idle-timeout 120 -flush
+ScriptAlias /fcgi-bin/php.cgi /opt/bubba/web-admin/admin
+FastCgiExternalServer /opt/bubba/web-admin/admin/index.php -socket fcgi -idle-timeout 120 -flush
 
 <Location /admin>
 	RewriteEngine on
diff -ruN a/php5-cgi.conf b/php5-cgi.conf
--- a/php5-cgi.conf	2013-06-26 22:25:47.000000000 +0200
+++ b/php5-cgi.conf	2015-07-07 12:51:50.176326538 +0200
@@ -1,3 +1,7 @@
 cgi.fix_pathinfo=0
 session.save_path = "0;660;/var/lib/php5"
 session.gc_maxlifetime = 87000
+date.timezone="Europe/Amsterdam"
+short_opentag=On
+date.timezone="Europe/Amsterdam"
+short_opentag=On
diff -ruN a/spawn-php b/spawn-php
--- a/spawn-php	2013-06-26 22:25:46.000000000 +0200
+++ b/spawn-php	2015-07-07 12:51:50.166325604 +0200
@@ -4,10 +4,10 @@
 SPAWNFCGI="/usr/bin/spawn-fcgi"
 
 ## ABSOLUTE path to the PHP binary
-FCGIPROGRAM="/usr/bin/php5-cgi"
+FCGIPROGRAM="/usr/bin/php-cgi"
 
 ## bind to tcp-port on localhost
-FCGISOCKET="/var/lib/apache2/fastcgi/fcgi"
+FCGISOCKET="/var/run/bubba-fcgi.sock"
 
 ## number of PHP childs to spawn in addition to the default. Minimum of 2.
 ## Actual childs = PHP_FCGI_CHILDREN + 1
@@ -24,7 +24,7 @@
 
 ## if this script is run as root switch to the following user
 USERID=
-GROUPID=www-data
+GROUPID=nginx
 
 ################## no config below this line
 
@@ -47,7 +47,7 @@
 
 umask 0002
 # clean environment and set up a new one
-env - $E $SPAWNFCGI -s $FCGISOCKET -f $FCGIPROGRAM  -g $GROUPID -C $PHP_FCGI_CHILDREN -P /var/run/admin.pid
+env - $E $SPAWNFCGI -s $FCGISOCKET -f $FCGIPROGRAM  -g $GROUPID -C $PHP_FCGI_CHILDREN -P /var/run/bubba-admin.pid
 umask 0022
 
 chmod 770 $FCGISOCKET
